!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.ResizeObserverPolyfill=b()}(this,function(){"use strict";function a(a){return parseFloat(a)||0}function b(b){var c=Array.prototype.slice.call(arguments,1);return c.reduce(function(c,d){var e=b["border-"+d+"-width"];return c+a(e)},0)}function c(b){for(var c=["top","right","bottom","left"],d={},e=0,f=c;e<f.length;e+=1){var g=f[e],h=b["padding-"+g];d[g]=a(h)}return d}function d(a){var b=a.getBBox();return i(0,0,b.width,b.height)}function e(d){var e=d.clientWidth,g=d.clientHeight;if(!e&&!g)return v;var h=getComputedStyle(d),j=c(h),k=j.left+j.right,l=j.top+j.bottom,m=a(h.width),n=a(h.height);if("border-box"===h.boxSizing&&(Math.round(m+k)!==e&&(m-=b(h,"left","right")+k),Math.round(n+l)!==g&&(n-=b(h,"top","bottom")+l)),!f(d)){var o=Math.round(m+k)-e,p=Math.round(n+l)-g;1!==Math.abs(o)&&(m-=o),1!==Math.abs(p)&&(n-=p)}return i(j.left,j.top,m,n)}function f(a){return a===document.documentElement}function g(a){return l?w(a)?d(a):e(a):v}function h(a){var b=a.x,c=a.y,d=a.width,e=a.height,f="function"==typeof DOMRectReadOnly?DOMRectReadOnly:Object,g=Object.create(f.prototype);return u(g,{x:b,y:c,width:d,height:e,top:c,right:b+d,bottom:e+c,left:b}),g}function i(a,b,c,d){return{x:a,y:b,width:c,height:d}}var j=function(){return"undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),k=function(){function a(a,b){var c=-1;return a.some(function(a,d){return a[0]===b?(c=d,!0):!1}),c}return"function"==typeof j.Map?j.Map:function(){function b(){this.__entries__=[]}var c={size:{}};return c.size.get=function(){return this.__entries__.length},b.prototype.get=function(b){var c=a(this.__entries__,b),d=this.__entries__[c];return d&&d[1]},b.prototype.set=function(b,c){var d=a(this.__entries__,b);~d?this.__entries__[d][1]=c:this.__entries__.push([b,c])},b.prototype["delete"]=function(b){var c=this.__entries__,d=a(c,b);~d&&c.splice(d,1)},b.prototype.has=function(b){return!!~a(this.__entries__,b)},b.prototype.clear=function(){this.__entries__.splice(0)},b.prototype.forEach=function(a,b){var c=this;void 0===b&&(b=null);for(var d=0,e=c.__entries__;d<e.length;d+=1){var f=e[d];a.call(b,f[1],f[0])}},Object.defineProperties(b.prototype,c),b}()}(),l=j.window===j&&"undefined"!=typeof document,m=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame:function(a){return setTimeout(function(){return a(Date.now())},1e3/60)}}(),n=2,o=function(){var a=Date;return"object"==typeof performance&&"function"==typeof performance.now&&(a=performance),function(){return a.now()}}(),p=function(a,b,c){function d(){g=!1,a(),h&&f()}function e(){c?m(d):d()}function f(){var a=o();if(g){if(n>a-i)return;h=!0}else g=!0,h=!1,setTimeout(e,b);i=a}void 0===c&&(c=!1);var g=!1,h=!1,i=0;return f},q=20,r=80,s="function"==typeof MutationObserver&&"object"==typeof navigator&&!("Netscape"===navigator.appName&&navigator.userAgent.match(/Trident\/.*rv:11/)),t=function(){this.isCycleContinuous_=!s,this.listenersEnabled_=!1,this.mutationsObserver_=null,this.observers_=[],this.refresh=p(this.refresh.bind(this),q,!0),this.continuousUpdateHandler_=p(this.refresh,r)};t.prototype.connect=function(a){this.isConnected(a)||this.observers_.push(a),this.listenersEnabled_||this.addListeners_()},t.prototype.disconnect=function(a){var b=this.observers_,c=b.indexOf(a);~c&&b.splice(c,1),!b.length&&this.listenersEnabled_&&this.removeListeners_()},t.prototype.isConnected=function(a){return!!~this.observers_.indexOf(a)},t.prototype.refresh=function(){var a=this.updateObservers_();a?this.refresh():this.isCycleContinuous_&&this.listenersEnabled_&&this.continuousUpdateHandler_()},t.prototype.updateObservers_=function(){var a=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return a.forEach(function(a){return a.broadcastActive()}),a.length>0},t.prototype.addListeners_=function(){l&&!this.listenersEnabled_&&(window.addEventListener("resize",this.refresh),document.addEventListener("transitionend",this.refresh),s&&(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this.listenersEnabled_=!0,this.isCycleContinuous_&&this.refresh())},t.prototype.removeListeners_=function(){l&&this.listenersEnabled_&&(window.removeEventListener("resize",this.refresh),document.removeEventListener("transitionend",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationsObserver_=null,this.listenersEnabled_=!1)};var u=function(a,b){for(var c=0,d=Object.keys(b);c<d.length;c+=1){var e=d[c];Object.defineProperty(a,e,{value:b[e],enumerbale:!1,writable:!1,configurable:!0})}return a},v=i(0,0,0,0),w=function(){return"function"==typeof SVGGraphicsElement?function(a){return a instanceof SVGGraphicsElement}:function(a){return a instanceof SVGElement&&"function"==typeof a.getBBox}}(),x=function(a){this.target=a,this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=i(0,0,0,0)};x.prototype.isActive=function(){var a=g(this.target);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},x.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a};var y=function(a,b){var c=h(b);u(this,{target:a,contentRect:c})},z=function(a,b,c){if("function"!=typeof a)throw new TypeError("The callback provided as parameter 1 is not a function.");this.activeTargets_=[],this.observationTargets_=new k,this.callback_=a,this.controller_=b,this.callbackCtx_=c};z.prototype.observe=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("Element"in j&&Element instanceof Object){if(!(a instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var b=this.observationTargets_;b.has(a)||(b.set(a,new x(a)),this.controller_.isConnected(this)||this.controller_.connect(this),this.controller_.refresh())}},z.prototype.unobserve=function(a){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("Element"in j&&Element instanceof Object){if(!(a instanceof Element))throw new TypeError('parameter 1 is not of type "Element".');var b=this.observationTargets_;b.has(a)&&(b["delete"](a),b.size||this.controller_.disconnect(this))}},z.prototype.disconnect=function(){this.clearActive(),this.observationTargets_.clear(),this.controller_.disconnect(this)},z.prototype.gatherActive=function(){this.clearActive();var a=this.activeTargets_;this.observationTargets_.forEach(function(b){b.isActive()&&a.push(b)})},z.prototype.broadcastActive=function(){if(this.hasActive()){var a=this.callbackCtx_,b=this.activeTargets_.map(function(a){return new y(a.target,a.broadcastRect())});this.callback_.call(a,b,a),this.clearActive()}},z.prototype.clearActive=function(){this.activeTargets_.splice(0)},z.prototype.hasActive=function(){return this.activeTargets_.length>0};var A=new t,B="function"==typeof WeakMap?new WeakMap:new k,C=function(a){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var b=new z(a,A,this);B.set(this,b)};["observe","unobserve","disconnect"].forEach(function(a){C.prototype[a]=function(){var b;return(b=B.get(this))[a].apply(b,arguments)}});var D=function(){return"function"==typeof j.ResizeObserver?j.ResizeObserver:C}();return D});